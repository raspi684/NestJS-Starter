# NestJS + Typeorm + Docker + Swagger + Sentry + Husky

## This NestJS template:
* allows you to develop and debug application directly in Docker
* makes it easier to generate migrations from CLI using makefile
* has configured Typeorm and connection to PostgreSQL database
* has validation of environments variables while starting application
* has autogenerated swagger api documentation
* has implemented Sentry integrations
* has configured Husky (pre-commit hooks)


## Requirements

* docker
* docker-compose
* make
* node 16
* npm 8

## Installation

```bash
# install npm packages on your host machine (for IDE auto-completion)
npm install
```
Create `.env` using `.env.example`.

## Running the app

***docker-compose* and *makefile* load .env file**

```bash
# start dev (watcher + debugger)
make start

# start only DB
make start-db

# start only API without detaching container
make start-api

# stop containers
make stop

# stop containers and remove API docker image 
# (adding a new package to the project
# requires rebuilding the docker image)
make stop-and-remove-image

# generate migration (in .env DB_LOCALHOST=true override db host)
make generate-migration NAME=MigrationName

# revert migration (in .env DB_LOCALHOST=true override db host)
make revert-migration
```

## Adding a new package

```bash
# Install a new package
npm install argon2

# Stop and remove existing API image
make stop-and-remove-image

# Start API (if previous command was executed, docker build API image from scratch and install all packages)
make start 
```
